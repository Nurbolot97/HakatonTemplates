{% extends 'Post/base_post.html' %}


{% block title %}{{ post.title }} - {{ block.super }}{% endblock %}

{% block content %}
<br>
    <div class="container">
        <div class="row mt-3">
            <h2 class="head" style="text-align: center; font-family:'Times New Roman', Times, serif;">{{ post.title }}</h2>
            <p class="header" style="text-align: left;">Published by {{ post.author }} at {{ post.date_pub }}</p>
            <div class="post" style="text-align: left; font-family: 'Times New Roman', Times, serif;">
                {{ post.body }}
            <br>
            <p class="footer" style="text-align: right;">
            Updated at {{ post.updated_at }}
            </p>
                <div class="btn-group-smaller bg-dark btn-group-smaller" style="text-align: center;" role="group">
                    <a href="{% url 'post_update' pk=post.pk %}"><button type="button" class="btn btn-primary bg-dark">Update</button></a>
                    <a href="{% url 'post_delete' pk=post.pk %}"><button type="button" class="btn btn-primary bg-dark">Delete</button></a>

                </div>
            </p>
        </div>
        {% with comments_posts.count as total_comments %}
            <h4>
                Comments: {{ total_comments }}
            </h4>
            {% endwith %}

            {% for comment in comments_posts %}
                <div class="comment">
                    <p class="info">
                        Comment created by: {{ comment.author }} at
                        {{ comment.created_date }}
                    </p>
                    <p>Comment text: {{ comment.text|linebreaks }}</p> 
                    
                    {% if user.id == comment.author.id %}
                        <button class="btn btn-primary bg-dark"><a href="{% url 'comment_delete' pk=comment.pk %}">Delete</a></button>
                    {% endif %}
                </div>
                    {% empty %}
                        <p>There are no comments yet.</p>
            {% endfor %}

                {% if new_comment %}
                <form method="POST">
                    {{ comment_form.as_p }}
                    {% csrf_token %}
                    <p><input type="submit">Add comment</p>
                </form>
                {% endif %}
               
    </div>
{% endblock %}











